{% extends 'base.html' %}

{% block script %}
<script type="text/javascript">
  Stripe.setPublisableKey('pk_test_czoQrfm8axvu0QhOU5Rviyd3')
</script>
{% endblock script %}
{% block jquery %}
$(function() {
  var $form = $('#payment-form');
  $form.submit(function(event) {
  // Disable the submit button to avoid repeated clicks)
  $form.find('.submit').prop('disabled', true);

  // Request a token from Stripe
  Stripe.card.createToken($form, stripeResponseHandler);

  // Prevent the form from being submitted:
  return false;
  });
});

{% endblock jquery %}
{% block content %}
{{ context }}
<div class="row">
  <div class="col-sm-6 col-sm-offset-3" >
<form class="form" action="" method="POST" id="payment-form"> {% csrf_token %}
  <span class="payment-errors"></span>

    <div class="form-row">
      <label>
        <span>Card Number</span>
        <input type="text" size="20" data-stripe="number">
      </label>
    </div>

    <div class="form-row">
      <label>
        <span>Expiration (MM/YY)</span>
        <input type="text" size="2" data-stripe="exp_month">
      </label>
      <span>/</span>
        <input type="text" size="2" data-stripe="exp_month">
    </div>

    <div class="form-row">
      <label>
        <span>CVC</span>
        <input type="text" size="4" data-stripe="cvc">
      </label>
    </div>
    <input type="submit" class="btn btn-success" value="Submit Payment">
</form>

  </div>
</div>

{% endblock content %}
